{% extends 'core/base.html' %}
{% block title %}Register - PortfolioPro{% endblock title %}

{% block content %}
<div class="row justify-content-center align-items-center" style="min-height: 85vh;">
  <div class="col-md-6 col-lg-5">
    <div class="card shadow-lg p-4 border-0 rounded-4">
      <h2 class="mb-4 text-center text-primary fw-bold">Create Your Account</h2>
      <p class="text-center text-muted mb-4">Register to start your journey with PortfolioPro</p>

      <form method="post" novalidate>
        {% csrf_token %}

        <!-- Username -->
        <div class="mb-4">
          <label for="id_username" class="form-label fw-semibold"><b>{{ form.username.label }}</b></label>
          {{ form.username }}
          {% if form.username.errors %}
            {% for error in form.username.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- Email -->
        <div class="mb-4">
          <label for="id_email" class="form-label fw-semibold"><b>{{ form.email.label }}</b></label>
          {{ form.email }}
          {% if form.email.errors %}
            {% for error in form.email.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- First Name -->
        <div class="mb-4">
          <label for="id_first_name" class="form-label fw-semibold"><b>{{ form.first_name.label }}</b></label>
          {{ form.first_name }}
          {% if form.first_name.errors %}
            {% for error in form.first_name.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- Last Name -->
        <div class="mb-4">
          <label for="id_last_name" class="form-label fw-semibold"><b>{{ form.last_name.label }}</b></label>
          {{ form.last_name }}
          {% if form.last_name.errors %}
            {% for error in form.last_name.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- Password1 -->
        <div class="mb-4 position-relative">
          <label for="id_password1" class="form-label fw-semibold"><b>{{ form.password1.label }}</b></label>
          <div class="position-relative">
            {{ form.password1 }}
            <i class="fa fa-eye toggle-password1" style="position: absolute; top: 50%; right: 15px; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
          </div>
          {% if form.password1.errors %}
            {% for error in form.password1.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- Password2 -->
        <div class="mb-4 position-relative">
          <label for="id_password2" class="form-label fw-semibold"><b>{{ form.password2.label }}</b></label>
          <div class="position-relative">
            {{ form.password2 }}
            <i class="fa fa-eye toggle-password2" style="position: absolute; top: 50%; right: 15px; transform: translateY(-50%); cursor: pointer; color: #6c757d;"></i>
          </div>
          {% if form.password2.errors %}
            {% for error in form.password2.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          {% endif %}
        </div>

        <!-- Submit Button -->
        <div class="d-grid mb-3">
          <button type="submit" class="btn btn-success btn-lg">Register</button>
        </div>
      </form>

      <p class="mt-4 text-center text-muted">
        Already have an account?
        <a href="{% url 'login' %}" class="text-decoration-none fw-semibold">Login here</a>
      </p>

    </div>
  </div>
</div>

<!-- Extra Styling -->
<style>
input[type="text"],
input[type="email"],
input[type="password"] {
  width: 100%;
  padding-right: 40px; /* Space for eye icon */
  height: 50px;
  border-radius: 0.375rem;
}
.toggle-password1, .toggle-password2 {
  font-size: 1.2rem;
}
</style>

<!-- Password Toggle Scripts -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // For password1
  const togglePassword1Btn = document.querySelector('.toggle-password1');
  const password1Input = document.getElementById('id_password1');

  togglePassword1Btn.addEventListener('click', function () {
    const type = password1Input.getAttribute('type') === 'password' ? 'text' : 'password';
    password1Input.setAttribute('type', type);

    // Change Eye Icon
    this.classList.toggle('fa-eye');
    this.classList.toggle('fa-eye-slash');
  });

  // For password2
  const togglePassword2Btn = document.querySelector('.toggle-password2');
  const password2Input = document.getElementById('id_password2');

  togglePassword2Btn.addEventListener('click', function () {
    const type = password2Input.getAttribute('type') === 'password' ? 'text' : 'password';
    password2Input.setAttribute('type', type);

    // Change Eye Icon
    this.classList.toggle('fa-eye');
    this.classList.toggle('fa-eye-slash');
  });
});
</script>
{% endblock content %}
